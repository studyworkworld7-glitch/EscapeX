<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Project Escape | Cloud Build</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400;600&display=swap" rel="stylesheet">
    
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js" async defer></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="amber-overlay"></div>

    <div id="auth-screen" class="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center p-8 text-center">
        <h1 class="text-xs tracking-[0.8em] uppercase opacity-40 mb-12">Initialize Escape</h1>
        <button onclick="handleAuthClick()" class="glass px-8 py-4 text-[10px] uppercase tracking-widest flex items-center gap-3">
            <i data-lucide="log-in" class="w-4"></i> Sync with Google
        </button>
        <p class="text-[8px] uppercase opacity-20 mt-8 leading-loose">Data will be stored securely<br>in your private Google App Data folder</p>
    </div>

    <nav class="fixed bottom-0 w-full h-24 bg-black/95 backdrop-blur-3xl border-t border-white/5 flex justify-around items-center z-50 px-4 pb-4">
        <button onclick="show('focus')" class="nav-item active" id="n-focus"><i data-lucide="timer"></i></button>
        <button onclick="show('tasks')" class="nav-item" id="n-tasks"><i data-lucide="flame"></i></button>
        <button onclick="show('zen')" class="nav-item" id="n-zen"><i data-lucide="wind"></i></button>
        <button onclick="show('map')" class="nav-item" id="n-map"><i data-lucide="map"></i></button>
        <button onclick="show('settings')" class="nav-item" id="n-settings"><i data-lucide="settings"></i></button>
    </nav>

    <section id="focus" class="view active px-8 pt-10">
        <div class="text-center mb-6"><h1 class="text-[10px] tracking-[0.5em] uppercase opacity-30">The Void</h1></div>
        <div class="relative w-64 h-64 mx-auto flex items-center justify-center mb-10">
            <svg class="absolute inset-0 w-full h-full -rotate-90">
                <circle cx="128" cy="128" r="120" stroke="rgba(255,255,255,0.05)" stroke-width="1" fill="none"/>
                <circle id="progress" cx="128" cy="128" r="120" stroke="white" stroke-width="2" fill="none" stroke-dasharray="754" stroke-dashoffset="754" stroke-linecap="round"/>
            </svg>
            <div id="timer-display" class="text-6xl font-extralight tracking-widest">25:00</div>
        </div>
        <div class="space-y-6">
            <div class="grid grid-cols-3 gap-3">
                <button onclick="setTimer(1500)" class="glass py-4 text-[10px] uppercase">25m</button>
                <button onclick="setTimer(3000)" class="glass py-4 text-[10px] uppercase">50m</button>
                <button onclick="toggleSlider()" class="glass py-4 text-[10px] uppercase">Custom</button>
            </div>
            <div id="slider-box" class="hidden glass p-6">
                <input type="range" min="1" max="180" value="25" class="w-full" oninput="updateCustom(this.value)">
                <p class="text-center mt-4 text-[10px] uppercase opacity-40"><span id="custom-val">25</span> Minutes</p>
            </div>
            <button onclick="toggleTimer()" id="main-btn" class="w-full py-5 bg-white text-black font-bold uppercase tracking-[0.4em] text-xs rounded-full">Enter Flow</button>
            <div class="glass p-3 flex justify-between items-center px-4">
                <button onclick="setAudio('white')" id="a-white" class="sound-btn opacity-20"><i data-lucide="cloud"></i></button>
                <button onclick="setAudio('brown')" id="a-brown" class="sound-btn opacity-20"><i data-lucide="waves"></i></button>
                <button onclick="setAudio('tick')" id="a-tick" class="sound-btn opacity-20"><i data-lucide="watch"></i></button>
                <button onclick="stopAudio()" class="opacity-20"><i data-lucide="volume-x"></i></button>
            </div>
        </div>
    </section>

    <section id="tasks" class="view px-8 pt-16">
        <h2 class="text-xs tracking-[0.5em] uppercase opacity-20 mb-8 text-center">Journal</h2>
        <div class="glass p-5 mb-8 flex items-center">
            <input type="text" id="task-in" placeholder="Objective..." class="flex-1 bg-transparent outline-none font-light" onkeypress="if(event.key==='Enter')addTask()">
            <button onclick="addTask()"><i data-lucide="plus"></i></button>
        </div>
        <div id="task-list" class="space-y-4"></div>
    </section>

    <section id="zen" class="view px-8 pt-20 items-center justify-start">
        <h2 class="text-xs tracking-[0.5em] uppercase opacity-20 mb-20 text-center">Zen Breathing</h2>
        <div id="zen-ring" class="breath-ring w-52 h-52 rounded-full flex items-center justify-center">
            <div id="zen-text" class="text-[10px] uppercase tracking-[0.4em] opacity-40">Ready</div>
        </div>
        <button onclick="startZen()" id="zen-btn" class="mt-24 glass px-12 py-4 text-[10px] uppercase tracking-widest">Begin Ritual</button>
    </section>

    <section id="map" class="view !p-0 bg-black items-center justify-center">
        <div id="universe-sky" class="absolute inset-0 overflow-hidden pointer-events-none"></div>
        <div class="relative z-10 text-center pointer-events-none">
            <h1 id="star-count" class="text-8xl font-thin tracking-tighter">0</h1>
            <p class="text-[10px] tracking-[0.5em] uppercase opacity-20 mt-4">Stars Earned</p>
        </div>
    </section>

    <section id="settings" class="view px-8 pt-16">
        <h2 class="text-xs tracking-[0.5em] uppercase opacity-20 mb-8 text-center">Settings</h2>
        <div class="glass p-6 space-y-8">
            <div class="flex justify-between items-center">
                <span class="text-xs uppercase tracking-widest opacity-60">Night Amber Mode</span>
                <input type="checkbox" id="amber-check" onchange="toggleAmber(this.checked)" class="w-6 h-6">
            </div>
            <div class="pt-8 border-t border-white/5 space-y-6">
                <button onclick="exportData()" class="w-full text-left text-[10px] uppercase tracking-widest opacity-40">Local Backup</button>
                <button onclick="handleSignoutClick()" class="w-full text-left text-[10px] uppercase tracking-widest text-red-500/50">Disconnect Google</button>
            </div>
        </div>
    </section>

    <script src="script.js"></script>
</body>
</html>
